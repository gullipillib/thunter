<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:fb="https://www.facebook.com/2008/fbml">
  <head>
    <title>Treasure Spot Buy</title>
      <style type="text/css">
          #Button1 {
              z-index: 1;
              left: 730px;
              top: 19px;
              position: absolute;
              height: 30px;
          }
      </style>
  </head>
  <body style="height: 359px">
    <h2>Buy Treasure Spot</h2>
    <button onclick="buy()" style="z-index: 1; left: 43px; top: 140px; position: absolute">Buy Treasure Spot Now</button>
      &nbsp;<label style="z-index: 1; left: 12px; top: 52px; position: absolute; height: 77px; width: 307px;" >You have to own atleast one&nbsp; Treasure Hunting Spot. You can later sell it for a specific price or on a bid system.<br />
      Price : $3</label>
      <label style="z-index: 1; left: 12px; top: 282px; position: absolute; height: 21px; width: 354px;" > &nbsp;Copy above Code for your accounting information<br />
      </label>
      <a href="play.aspx" target="_self" style="position:absolute;left:739px; top:37px; width:109px; height: 18px;" > Back to Game </a> 

    <script src="http://connect.facebook.net/en_US/all.js"></script>
    <script>
        FB.init({ appId: "123405257731200", status: true, cookie: true });

        // The dialog only opens if you've implemented the
        // Credits Callback payments_get_items.
        function buy() {
            var obj = {
                method: 'pay',
                action: 'buy_item',
                // You can pass any string, but your payments_get_items must
                // be able to process and respond to this data.
                order_info: { 'item_id': 'ts1' },
                dev_purchase_params: { 'oscif': true }
            };

            FB.ui(obj, js_callback);
        }

        // This JavaScript callback handles FB.ui's return data and differs
        // from the Credits Callbacks.
        var js_callback = function (data) {
            if (data['order_id']) {
                // Facebook only returns an order_id if you've implemented
                // the Credits Callback payments_status_update and settled
                // the user's placed order.

                // Notify the user that the purchased item has been delivered
                // without a complete reload of the game.
                write_callback_data(
                          "<br><b>Transaction Completed!</b> </br></br>"
                          + "Data returned from Facebook: </br>"
                          + "Order ID: " + data['order_id'] + "</br>"
                          + "Status: " + data['status']);
		
            } else if (data['error_code']) {
                // Appropriately alert the user.
                write_callback_data(
                          "<br><b>Transaction Failed!</b> </br></br>"
                          + "Error message returned from Facebook:</br>"
                          + data['error_code'] + " - "
                          + data['error_message']);
            } else {
                // Appropriately alert the user.
                write_callback_data("<br><b>Transaction failed!</b>");
            }
        };

        function write_callback_data(str) {
            document.getElementById('fb-ui-return-data').innerHTML = str;
        }
    </script>
<iframe src="https://treasurehunter.apphb.com/callback.aspx" style="width: 345px; z-index: 1; left: 8px; top: 188px; position: absolute; height: 88px">

</iframe>
  </body>
</html>